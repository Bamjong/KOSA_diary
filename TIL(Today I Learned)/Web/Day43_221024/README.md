# ğŸ“š Day43_221024

Author: ê³ ë²”ì¢…
Created Time: 2022ë…„ 10ì›” 24ì¼ ì˜¤ì „ 9:13
Status: ğŸ–¨ Published
Tags: JSP, JSP:session
Updated Time: 2022ë…„ 10ì›” 24ì¼ ì˜¤í›„ 5:45

# 1. JSP

### <jsp:include>

(Ex12_Main_include.jsp)

- includeë¥¼ í†µí•´ êµ¬ë¬¸ì„ ë‚´ ë§ˆìŒëŒ€ë¡œ ì»¨íŠ¸ë¡¤ í•  ìˆ˜ ìˆë‹¤
- ë‹¤ë¥¸ JSP í˜ì´ì§€ì˜ â€˜ì‹¤í–‰â€™ê²°ê³¼ë¥¼ í˜„ì¬ ìœ„ì¹˜ì— ì‚½ì…
- ì œì–´ê¶Œì„ ë‹¤ì‹œ ëŒë ¤ë°›ìŒ

![https://user-images.githubusercontent.com/92353613/197425698-9a38d27c-2c58-4ea6-b2d2-921cea1cf8cb.png](https://user-images.githubusercontent.com/92353613/197425698-9a38d27c-2c58-4ea6-b2d2-921cea1cf8cb.png)

### <jsp:param> ì•¡ì…˜íƒœê·¸

(Ex13_include_param.jsp)

- ì‹ ê·œ íŒŒë¼ë¯¸í„°ë¥¼ ì¶”ê°€í•˜ëŠ” ë° ì‚¬ìš©
    - <jsp:param name=â€íŒŒë¼ë¯¸í„° ì´ë¦„â€ value=â€ê°’â€/>
- ê¸°ì¡´ íŒŒë¼ë¯¸í„°ëŠ” ìœ ì§€í•˜ê³  íŒŒë¼ë¯¸í„°ë¥¼ ìƒˆë¡œ ì¶”ê°€

### <jsp:forward>

(Ex14_forward_main.jsp)

- í•˜ë‚˜ì˜ jsp í˜ì´ì§€ì—ì„œ ë‹¤ë¥¸ jsp í˜ì´ì§€ë¡œ ìš”ì²­ ì²˜ë¦¬ë¥¼ ì „ë‹¬í•  ë•Œ ì‚¬ìš©
- íë¦„ì˜ ì œì–´ë¥¼ ì™„ì „íˆ ë„˜ê²¨ë²„ë¦¼, íŠ¹ì • ì¡°ê±´ì— ë”°ë¼ ë‹¤ë¥¸ í˜ì´ì§€ë¥¼ ë§Œë“¤ìˆ˜ ìˆìŒ
- forward = ì¤‘ê°œì

```
[ìš”ì²­ì— ëŒ€í•œ íë¦„ ì œì–´]
			
	1. include
	2. forward
	
	ê³µí†µì : requestê°ì²´ë¥¼ ê³µìœ í•œë‹¤ (^^!)
	ì°¨ì´ì : ì œì–´ê¶Œ : include(ì œì–´ê¶Œì„ ë‹¤ì‹œ ê°€ì§€ê³  ì˜¨ë‹¤)
				  forward(ì œì–´ê¶Œì„ ë„˜ê²¨ì¤€ë‹¤) >> Spring ì—ì„œ ... (servlet) >> ìš”ì²­ë§ˆë‹¤ ë‹¤ë¥¸ ì„œë¹„ìŠ¤
				  POINT) [ìš”ì²­ ì£¼ì†Œ]ëŠ” [ë™ì¼]í•œë° [ë‹¤ë¥¸ page]ì˜ ë‚´ìš©ì„ ì„œë¹„ìŠ¤
	
	ex)
	//http://192.168.0.25:8090/WebJSP/Ex13_include_param.jsp?code=B
	//http://192.168.0.25:8090/WebJSP/Ex13_include_param.jsp?code=C
	
	1. í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­í•œ page >> Ex14_forward.jsp
	2. í´ë¼ì´ì–¸íŠ¸ê°€ ë°›ëŠ” page ì •ë³´ëŠ” > A.jsp or B.jsp or C.jsp

ì›ë¦¬: Buffer ì£¼ì¸ > Ex14_forward.jsp > BufferëŠ” Ex14_forward ë‚´ìš©ì„ ë‹´ì•„ì•¼ í•˜ëŠ”ë° 
		 forwardë¥¼ ë§Œë‚˜ë©´ > ì£¼ì¸ ë°°ì‹  > Buffer ë¹„ì›Œë²„ë¦¬ê³  > ë¹„ì›Œì§„ Buffer > forward ëœ page ë‚´ìš©
		 > Client ì„œë¹„ìŠ¤
```

## 2. ì˜ˆì™¸ì²˜ë¦¬

Ex15_Error_Local.jsp

```
Error (ì˜ˆì™¸ìƒí™©) ì²˜ë¦¬ í˜ì´ì§€
	ìµœì¢… ë°°í¬ ì „ì— ë§Œë“¤ì–´ì„œ ì²˜ë¦¬ ....
	
	1. í˜ì´ì§€ ë§ˆë‹¤ ì„¤ì •í•˜ê¸°
	2. ì „ì—­ ì„¤ì •í•˜ê¸°
	
	í˜ì´ì§€ì— ì§€ì—­ ì„¤ì • ë˜ì–´ìˆìœ¼ë©´ ê·¸ ë†ˆì´ ìš°ì„ ....
```

web.xml

```
WebApp(context) ì „ì²´ í˜ì´ì§€ì— ì ìš©ë˜ëŠ” Error í˜ì´ì§€
  	
  	1. ìƒíƒœì½”ë“œ (500 ì„œë²„ì½”ë“œ, 404 ìš”ì²­í˜ì´ì§€ ì—†ì–´ìš”, 403 ì ‘ê·¼ê¶Œí•œ )
  	íŠ¹ì • í˜ì´ì§€ë¥¼ ë§Œë“¤ì–´ì„œ ìƒíƒœì½”ë“œì— ë§ê²Œ í˜ì´ì§€ë¥¼ ì„œë¹„ìŠ¤
  	
  	
  	2. ì˜ˆì™¸ë³„ë¡œ (ì„¸ë¶„í™”) : NullPoint ..ì²˜ë¦¬ í˜ì´ì§€, IndexOutofBound ì²˜ë¦¬ í˜ì´ì§€ ..
  	ê°œë°œì‹œì—ëŠ” ... ì•ˆë¼ìš©
  	ê°œë°œìëŠ” ì˜ˆì™¸ë¥¼ í™•ì¸
  	
  	ë°°í¬ì‹œ ì‘ì—…....
```

## 3. Cookie (ì¿ í‚¤)

```
ì •ë³´(ìë£Œ)ë°ì´í„° > ì €ì¥ > ì¥ì†Œ(where)
	
	[ì›¹ì´ë¼ëŠ” ê´€ì ]ì— ë°ì´í„° ì–´ëŠ ì¥ì†Œì— ì €ì¥
	
	í´ë¼ì´ì–¸íŠ¸(ê°œì¸ Local PC)	: ì„œë²„(ì›¹ì„œë²„ or DBì„œë²„)
	
	ì–´ë””ì— ì €ì¥(ë³´ê´€)
	ê³ ë¯¼ (ê¸°ì¤€ì ): ë³´ì•ˆìš”ì†Œ(ë°ì´í„° ì¤‘ìš”ì„±), ì†Œë©¸(ì¼ì‹œì , ì˜ì†ì )
	
	ë³´ì•ˆ: í´ë¼ì´ì–¸íŠ¸ëƒ ì„œë²„ëƒ
	ì†Œë©¸: ë©”ëª¨ë¦¬ì™€ DB or íŒŒì¼
	
	Client (Local PC : ì›¹ë¸Œë¼ìš°ì €)
	1. Cookie (ë©”ëª¨ë¦¬ ì¿ í‚¤ & íŒŒì¼ ì¿ í‚¤(local ë””ìŠ¤í¬ì— txt ì €ì¥ > ì•”í˜¸í™” )) >> ì†Œë©¸ì‹œê¸°
	   ë‹¨ì ) í¬ê¸° ì œí•œì  (4096byte), ë³´ì•ˆ (ì‚¬ìš©ì ì‚­ì œ ... ì•”í˜¸í™” í•´ë… í•´ì»¤ê°€ ...)
	2. Local Storage(key, value) í˜•íƒœ
	   ì¥ì ) í¬ê¸°, value(ê°ì²´ ì‚¬ìš©ê°€ëŠ¥: JSON)
	   
	Server (ì›¹ ì„œë²„(WAS) (ë©”ëª¨ë¦¬) + DBì„œë²„)
	1. server memory: sessionê°ì²´ (ì‚¬ì´íŠ¸ ì ‘ì†í•˜ëŠ” ì‚¬ìš©ìë§ˆë‹¤ ê³ ìœ í•˜ê²Œ ë¬´ì—¬í•˜ëŠ” ë©”ëª¨ë¦¬(ê°ì²´)) > ì„œë²„ ë¦¬ë¶€íŒ…,ê°œë°œì½”ë“œë³€ê²½ > ì†Œë©¸ > ìƒì„±
	2. server memory: applicationê°ì²´ (ì‚¬ì´íŠ¸ ì ‘ì†í•˜ëŠ” ëª¨ë“  ì‚¬ìš©ìì—ê²Œ ê³ ìœ í•˜ê²Œ ë¬´ì—¬í•˜ëŠ” ë©”ëª¨ë¦¬(ê°ì²´)) > ì„œë²„ ë¦¬ë¶€íŒ…,ê°œë°œì½”ë“œë³€ê²½ > ì†Œë©¸ > ìƒì„±
	3. server memory: íŒŒì¼.txt (ê´€ë¦¬ê°€ í˜ë“¤ì–´ìš”)
	4. DB server	: ë³´ì•ˆ, ì˜ì†ì ì¸ ë°ì´í„° ê´€ë¦¬ >> ë¹„ìš©ì€ ì¶”ê°€ >> í´ë¼ìš°ë“œ ì‚¬ìš©
```

### ex)

- ì˜¤ëŠ˜í•˜ë£¨ ë³´ì§€ì•Šê¸°

# 4. Session

1. server memory: sessionê°ì²´ (ì‚¬ì´íŠ¸ ì ‘ì†í•˜ëŠ” ì‚¬ìš©ìë§ˆë‹¤ ê³ ìœ í•˜ê²Œ ë¬´ì—¬í•˜ëŠ” ë©”ëª¨ë¦¬(ê°ì²´)) > ì„œë²„ ë¦¬ë¶€íŒ…,ê°œë°œì½”ë“œë³€ê²½ > ì†Œë©¸ > ìƒì„±
2. server memory: applicationê°ì²´ (ì‚¬ì´íŠ¸ ì ‘ì†í•˜ëŠ” ëª¨ë“  ì‚¬ìš©ìì—ê²Œ ê³ ìœ í•˜ê²Œ ë¬´ì—¬í•˜ëŠ” ë©”ëª¨ë¦¬(ê°ì²´)) > ì„œë²„ ë¦¬ë¶€íŒ…,ê°œë°œì½”ë“œë³€ê²½ > ì†Œë©¸ > ìƒì„±
- Key (ìˆ«ì + ë¬¸ì)

```
session ê°ì²´ : ì„œë²„(Web)ì— ì ‘ì†í•œ ì‚¬ìš©ì ë§ˆë‹¤ ê³ ìœ í•˜ê²Œ ë¶€ì—¬ë˜ëŠ” ê°ì²´
ê³ ìœ ì„± ë³´ì¥ (key ê°’) >> ê°ê°ì˜ sessionê°ì²´ë§ˆë‹¤ ì´ë¦„í‘œ > keyê°’ > í´ë¼ì´ì–¸íŠ¸ì—ë„ ì „ë‹¬
í™œìš©) í´ë¼ì´ì–¸íŠ¸ë§ˆë‹¤ ê³ ìœ í•˜ê²Œ ë¶€ì—¬ (session ê°ì²´)
>> ë¡œê·¸ì¸ID, ì¥ë°”êµ¬ë‹ˆ(ì‚¬ìš©ìë§ˆë‹¤ ë‹¤ë¥¸), ì‚¬ìš©ì ì •ë³´ (ê°ê° ë‹¤ë¥¸ ì •ë³´), ì‚¬ìš©ìë§ˆë‹¤ ì ‘ì†í•œ ì‹œê°„, ë§ˆì§€ë§‰ ì ‘ì†í•œ ì‹œê°„

1. http://192.168.0.65:8090/WebJSP/Ex18_Session.jsp ì„œë²„ ìš”ì²­ ë³´ë‚´ê¸°
2. sessionID (key) ìƒì„± -> session -> sessionID response í•´ìš” (Cookie)
2.1	 JSESSIONID : B160DB3AF34621E42B9DDDB68477E449
3. ë™ê¸°í™” (ë„ˆë‘ ë‚˜ë‘ ì¹œêµ¬ë‹¤)

ex) ì ‘ì†ì 1000ëª…ì´ Web Serverì—ëŠ” key 1000ê°œ ë§Œë“¤ì–´ì§€ê³  keyì´ë¦„í‘œë¡œ ë‹¬ê³ ìˆëŠ” sessionê°ì²´ë„ 1000ê°œ ìƒì„±

ex) Client ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ì„ í´ë¦­ >> ì„œë²„ëŠ” ì–´ë– í•œ ì‘ì—…ì„ ìˆ˜í–‰ í• ê¹Œìš” >> ë¡œê·¸ì•„ì›ƒ íŒë‹¨ >> key ê°€ì§€ê³  ì™€ì„œ >> key (ì´ë¦„í‘œ) >> ê°ì²´ë¥¼ ì°¾ì•„ì„œ >> abandon
```

(Ex19_Session.jsp)

```
Today's POTNT
	ê°œë… ì´í•´ (ì„œë²„ìì› í™œìš©í•˜ê¸°)
	session ê°ì²´ ê°€ì§€ê³  ë†€ê¸°
	
	1. session ê°ì²´(ì‚¬ìš©ìë§ˆë‹¤ ë¶€ì—¬ë˜ëŠ” ê³ ìœ í•œ ê°ì²´)
		>> ì ‘ì†í•˜ëŠ” ë¸Œë¼ìš°ì ¸ë§ˆë‹¤ (sessionID)ë¥¼ ê°€ì§€ê³  ê°ì²´ ê´€ë¦¬
		>> ì ‘ì†í•œ ì‚¬ìš©ì ë§ˆë‹¤ ê³ ìœ í•œ ë³€ìˆ˜ ë§Œë“¤ê¸° ..... session.setAttribute()
		>> session.setAttribute("id",request.getParameter("userid"));
		
		ì ‘ì†ì 3ëª…
		
		ê¹€ìœ ì‹  : ì„œë²„ê°ì²´ ìƒì„±(session): ì‹ë³„ê°’ : A1 : sessionê°ì²´(ë³€ìˆ˜,ê°’)
		-sessionê°ì²´ (id,kim)
		
		ì´ìˆœì‹  : ì‹ë³„ê°’ : A2
		-sessionê°ì²´ (id,Lee)
		
		ë“±ë“±..
```

- session ê°ì²´ì˜ ìœ íš¨ Scope: webAppì „ì²´ .... ì–´ë–¤ í˜ì´ì§€ë“  ì €ì¥í•œ session ê°ì²´ ì‚¬ìš© ê°€ëŠ¥